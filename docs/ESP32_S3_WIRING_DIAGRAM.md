# ESP32-S3-Touch-LCD-7 Схема Подключения

## 🔌 Полная схема подключения компонентов

```
                    ┌─────────────────────────────────────────┐
                    │           ESP32-S3-WROOM-1              │
                    │                                         │
    ┌─────────────┐ │  GPIO8  ────────────────────────────────┼────── LCD_D0
    │             │ │  GPIO3  ────────────────────────────────┼────── LCD_D1  
    │   ST7262    │ │  GPIO46 ────────────────────────────────┼────── LCD_D2
    │  RGB LCD    │ │  GPIO9  ────────────────────────────────┼────── LCD_D3
    │  800x480    │ │  GPIO1  ────────────────────────────────┼────── LCD_D4
    │             │ │  GPIO5  ────────────────────────────────┼────── LCD_D5
    │             │ │  GPIO6  ────────────────────────────────┼────── LCD_D6
    │             │ │  GPIO7  ────────────────────────────────┼────── LCD_D7
    │             │ │  GPIO15 ────────────────────────────────┼────── LCD_D8
    │             │ │  GPIO16 ────────────────────────────────┼────── LCD_D9
    │             │ │  GPIO4  ────────────────────────────────┼────── LCD_D10
    │             │ │  GPIO45 ────────────────────────────────┼────── LCD_D11
    │             │ │  GPIO48 ────────────────────────────────┼────── LCD_D12
    │             │ │  GPIO47 ────────────────────────────────┼────── LCD_D13
    │             │ │  GPIO21 ────────────────────────────────┼────── LCD_D14
    │             │ │  GPIO14 ────────────────────────────────┼────── LCD_D15
    │             │ │                                         │
    │             │ │  GPIO40 ────────────────────────────────┼────── LCD_CLK
    │             │ │  GPIO41 ────────────────────────────────┼────── LCD_HSYNC
    │             │ │  GPIO39 ────────────────────────────────┼────── LCD_VSYNC
    │             │ │  GPIO42 ────────────────────────────────┼────── LCD_DISP
    │             │ │  GPIO2  ────────────────────────────────┼────── LCD_BLK
    └─────────────┘ │                                         │
                    │                                         │
    ┌─────────────┐ │  GPIO19 ────────┬───────────────────────┼────── I2C_SDA
    │   GT911     │ │                 │                       │
    │ Touchscreen │ │  GPIO20 ────────┼───┬───────────────────┼────── I2C_SCL
    │             │ │                 │   │                   │
    │             │ │  GPIO38 ────────┼───┼───────────────────┼────── GT911_INT
    │             │ │  GPIO18 ────────┼───┼───────────────────┼────── GT911_RST
    └─────────────┘ │                 │   │                   │
                    │                 │   │                   │
    ┌─────────────┐ │                 │   │                   │
    │   CH422G    │ │                 │   │                   │
    │GPIO Expander│ │ ────────────────┘   │                   │
    │             │ │ ───────────────────┘                   │
    └─────────────┘ │                                         │
                    │                                         │
    ┌─────────────┐ │  GPIO17 ────────────────────────────────┼────── CAN_TX
    │   TJA1051   │ │  GPIO18 ────────────────────────────────┼────── CAN_RX
    │CAN Tranceiver│ │                                         │
    │             │ │                                         │
    └─────────────┘ │  GPIO43 ────────────────────────────────┼────── UART_TX
                    │  GPIO44 ────────────────────────────────┼────── UART_RX
    ┌─────────────┐ │                                         │
    │   CH343     │ │  GPIO0  ────────────────────────────────┼────── BOOT
    │ USB-UART    │ │  EN     ────────────────────────────────┼────── RESET
    │             │ │                                         │
    └─────────────┘ └─────────────────────────────────────────┘
```

---

## 🔋 Схема питания

```
    ┌─────────────┐      ┌─────────────┐      ┌─────────────┐
    │   USB-C     │      │  Voltage    │      │   ESP32-S3  │
    │   5V Input  │─────▶│ Regulator   │─────▶│    3.3V     │
    │             │      │  (3.3V)     │      │             │
    └─────────────┘      └─────────────┘      └─────────────┘
                                │
                                ▼
                         ┌─────────────┐
                         │ Peripherals │
                         │             │
                         │ • ST7262    │
                         │ • GT911     │
                         │ • CH422G    │
                         │ • TJA1051   │
                         └─────────────┘
```

---

## 🌐 I2C шина (Shared Bus)

```
ESP32-S3              GT911               CH422G
 GPIO19 ──────────────── SDA ──────────────── SDA
 GPIO20 ──────────────── SCL ──────────────── SCL

I2C Addresses:
 • GT911:  0x5D (default) / 0x14 (alt)
 • CH422G: 0x24 (default)

Pull-up resistors: 4.7kΩ to 3.3V
```

---

## 🚗 CAN шина подключение

```
ESP32-S3           TJA1051          CAN Bus
GPIO17 ──────────── TXD              
GPIO18 ──────────── RXD              
                    │                
5V ────────────────── VCC             
GND ───────────────── GND             
                    │                
                    CANH ──────────── CAN High
                    CANL ──────────── CAN Low

Termination: 120Ω resistor between CANH and CANL at each end
```

---

## 📺 RGB LCD детальное подключение

### 16-bit RGB565 Data Lines:
```
ESP32-S3    ST7262      Color Bit
GPIO8   ──── D0     ──── Red[0]
GPIO3   ──── D1     ──── Red[1] 
GPIO46  ──── D2     ──── Red[2]
GPIO9   ──── D3     ──── Red[3]
GPIO1   ──── D4     ──── Red[4]

GPIO5   ──── D5     ──── Green[0]
GPIO6   ──── D6     ──── Green[1]
GPIO7   ──── D7     ──── Green[2]
GPIO15  ──── D8     ──── Green[3]
GPIO16  ──── D9     ──── Green[4]
GPIO4   ──── D10    ──── Green[5]

GPIO45  ──── D11    ──── Blue[0]
GPIO48  ──── D12    ──── Blue[1]
GPIO47  ──── D13    ──── Blue[2]
GPIO21  ──── D14    ──── Blue[3]
GPIO14  ──── D15    ──── Blue[4]
```

### Control Signals:
```
ESP32-S3    ST7262      Function
GPIO40  ──── CLK    ──── Pixel Clock (16MHz)
GPIO41  ──── HSYNC  ──── Horizontal Sync
GPIO39  ──── VSYNC  ──── Vertical Sync
GPIO42  ──── DISP   ──── Display Enable
GPIO2   ──── BLK    ──── Backlight Control
```

---

## 📐 Физические размеры и монтаж

### Размеры платы ESP32-S3-Touch-LCD-7:
- **Длина:** 165mm
- **Ширина:** 100mm  
- **Толщина:** 3.5mm (с экраном ~8mm)

### Экран ST7262:
- **Диагональ:** 7 дюймов
- **Разрешение:** 800x480 пикселей
- **Активная область:** 154.08 x 85.92 mm
- **Тип:** TFT RGB

### Крепежные отверстия:
- **Диаметр:** 3.2mm
- **Расстояние:** стандартное для 7" дисплеев

---

## ⚡ Технические характеристики

### Потребление тока:
- **ESP32-S3:** ~240mA (активный режим)
- **ST7262 LCD:** ~300mA (подсветка 100%)
- **GT911 Touch:** ~10mA (активный)
- **TJA1051 CAN:** ~70mA (активный)
- **Общее:** ~620mA @ 5V (3.1W)

### Рабочие температуры:
- **ESP32-S3:** -40°C to +85°C
- **ST7262:** -20°C to +70°C  
- **GT911:** -40°C to +85°C
- **TJA1051:** -40°C to +125°C

### Максимальные частоты сигналов:
- **RGB Pixel Clock:** 20MHz max
- **I2C Clock:** 400kHz max
- **CAN Bitrate:** 1Mbps max
- **UART Baudrate:** 2Mbps max

---

## 🛠️ Рекомендации по монтажу

### EMI/EMC защита:
1. **Экранирование:** металлический корпус
2. **Фильтры питания:** ферритовые кольца на кабелях
3. **Развязка:** конденсаторы 0.1μF на каждую микросхему
4. **Заземление:** сплошная земляная полигон

### Автомобильная установка:
1. **Виброзащита:** амортизирующие прокладки
2. **Температурная защита:** вентиляция корпуса
3. **Питание:** фильтр пульсаций 12V → 5V
4. **CAN изоляция:** оптроны для гальванической развязки

---

**Файл:** ESP32_S3_WIRING_DIAGRAM.md  
**Версия:** 1.0  
**Дата:** 30 июля 2025  
**Совместимость:** ESP32-S3-Touch-LCD-7 Hardware Rev 1.0+