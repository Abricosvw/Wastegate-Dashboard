# Полный экспорт ECU Dashboard для SquareLine Studio

## Содержимое экспорта

### Готовые файлы LVGL кода:
- `ui_complete.c` - полная реализация интерфейса с 6 датчиками
- `ui_complete.h` - заголовочный файл с определениями и функциями
- `ecu_can_integration.c/h` - интеграция с CAN-шиной
- `ecu_data_structures.h` - структуры данных ECU
- `main_integration_example.c` - пример полной интеграции

### Файлы настроек:
- `ui_theme.json` - цветовая схема автомобильной тематики
- `project_structure.txt` - описание структуры проекта

## Как использовать в SquareLine Studio

### Вариант 1: Импорт готового кода (рекомендуется)
1. Создайте новый проект в SquareLine Studio (800×480, ESP32)
2. Экспортируйте пустой проект
3. Замените сгенерированные файлы:
   - `ui/ui.c` → замените содержимое на `ui_complete.c`
   - `ui/ui.h` → замените содержимое на `ui_complete.h`
4. Добавьте файлы CAN интеграции в проект
5. Скомпилируйте

### Вариант 2: Ручное создание в SquareLine Studio
Следуйте инструкциям в `STEP_BY_STEP_GUIDE.md`

## Что получается

### Главный экран (MainScreen):
- Черный фон (#0A0A0A)
- Заголовок "Turbo Control Dashboard"
- Статус подключения в правом верхнем углу
- Сетка 3×2 с 6 датчиками размером 200×200px

### Датчики (Arc виджеты):
1. **MAP Pressure** (синий #00D4FF)
   - Позиция: Верхний левый (-260, 90)
   - Диапазон: 100-250 kPa
   - Углы дуги: 135° до 45°

2. **Wastegate** (зеленый #00FF88)
   - Позиция: Верхний центр (0, 90)
   - Диапазон: 0-100%

3. **TPS** (желтый #FFD700)
   - Позиция: Верхний правый (260, 90)
   - Диапазон: 0-100%

4. **RPM** (оранжевый #FF6B35)
   - Позиция: Нижний левый (-260, 320)
   - Диапазон: 0-7000 RPM
   - Предупреждения: >6000 RPM (оранжевый), >6500 RPM (красный)

5. **Target Boost** (желтый #FFD700)
   - Позиция: Нижний центр (0, 320)
   - Диапазон: 100-250 kPa

6. **TCU Status** (панель с индикатором)
   - Позиция: Нижний правый (260, 320)
   - Статусы: Normal (зеленый), Protection (оранжевый), Limp Mode (красный)

## Функции обновления в реальном времени

Код включает функции для обновления данных:
```c
ui_update_map_pressure(uint16_t value);
ui_update_wastegate_position(uint8_t value);
ui_update_tps_position(uint8_t value);
ui_update_engine_rpm(uint16_t value);
ui_update_target_boost(uint16_t value);
ui_update_tcu_status(bool protection, bool limp_mode);
ui_update_connection_status(bool connected);
```

## CAN интеграция

### Поддерживаемые CAN ID:
- **0x440**: Данные TCU (статус защиты, лимп-режим)
- **0x380**: Данные ECU (RPM, MAP, TPS)
- **0x200**: Boost Control (положение вестгейта, целевой наддув)

### Настройка CAN:
- Скорость: 500 кбит/с
- Частота обновления: 20Hz (50ms)
- Формат: Little Endian

## Компиляция и настройка

### Для ESP32:
```c
// platformio.ini
lib_deps = 
    lvgl/lvgl@^8.3.0
    
build_flags = 
    -DLVGL_CONF_INCLUDE_SIMPLE
    -DECU_CAN_ENABLED=1
```

### Для STM32:
- Включите LVGL 8.3.0
- Настройте CAN периферию
- Добавьте все .c/.h файлы в проект

## Настройки отображения

### Поддерживаемые размеры датчиков:
- Маленький: 150×150px
- Средний: 200×200px (по умолчанию)
- Большой: 280×280px
- Очень большой: 350×350px

### Поддерживаемые сетки:
- 1×6 (вертикальная полоса)
- 2×3 (стандартная)
- 3×2 (горизонтальная, по умолчанию)
- 6×1 (горизонтальная полоса)

## Автомобильная тема

### Цветовая схема:
- Фон: Очень темный (#0A0A0A)
- Карточки: Темно-серый (#1A1A1A)
- Текст: Белый (#FFFFFF)
- Границы: Серый (#333333)
- Параметры: Яркие автомобильные цвета

### Шрифты:
- Заголовки: Montserrat 24px
- Значения: Montserrat 32px (крупные)
- Единицы: Montserrat 14px (мелкие)

### Анимации:
- Переходы дуг: 200ms
- Обновление значений: Плавное
- Изменения цвета: Мгновенное

Этот экспорт содержит полную реализацию автомобильной приборной панели ECU с настраиваемыми размерами, количеством колонок и интеграцией CAN-шины.